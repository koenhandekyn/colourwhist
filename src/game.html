<template>
  <require from="./game.css"></require>
  <section class="au-animate">

    <section class="header">
      <a route-href="route: games">Games</a>
      <h2>${game.name} <small>${id}</small></h2>
      <form role="form" submit.delegate="submit()" class="game">
        <select id="current_gametype" value.bind="current_gametype" change.delegate="selectGameType($event)">
        <option repeat.for="name of gametypes | keys">${name}</option>
      </select>
        <input id="current_score" class="form-control" type="number" min="0" value.bind="current_score" />
        <button id="submit" type="submit" disabled.bind="!canSubmit">Score</button>
      </form>
    </section>

    <table class="rounds">
      <thead>
        <tr>
          <td class="roundnr"></td>
          <td class="gametype">Playing</td>
          <td class="player"><input class="form-control" type="checkbox" checked.bind="current_players[0]"></td>
          <td class="player"><input class="form-control" type="checkbox" checked.bind="current_players[1]"></td>
          <td class="player"><input class="form-control" type="checkbox" checked.bind="current_players[2]"></td>
          <td class="player"><input class="form-control" type="checkbox" checked.bind="current_players[3]"></td>
          <th class="delete"></th>
        </tr>
        <tr>
          <td class="roundnr"></td>
          <td class="gametype">Players</td>
          <td class="player">${players[1]}</td>
          <td class="player">${players[2]}</td>
          <td class="player">${players[3]}</td>
          <td class="player">${players[0]}</td>
          <th class="delete"></th>
        </tr>
        <tr>
          <th class="roundnr">#</th>
          <th class="gametype">Totals:</th>
          <th class="player">${totals[0]}</th>
          <th class="player">${totals[1]}</th>
          <th class="player">${totals[3]}</th>
          <th class="player">${totals[2]}</th>
          <th class="delete"></th>
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="round of sortedRounds">
          <td class="roundnr">${round.nr}</td>
          <td class="gametype">${round.gametype}</td>
          <td class="player">${round.s1}</td>
          <td class="player">${round.s2}</td>
          <td class="player">${round.s3}</td>
          <td class="player">${round.s4}</td>
          <th class="delete"><a href="#" click.delegate="$parent.removeRound(round.id)" title="Remove">[X]</a></td>
        </tr>
      </tbody>
    </table>

  </section>
</template>