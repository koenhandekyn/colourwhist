<template>
  <require from="./game.css"></require>
  <section class="">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" route-href="route: games">Home</a>
      </div>
      <div class="nav-center">
        <a class="nav-item">${game.name}</a>
      </div>
      <div class="nav-right">
        <a class="nav-item" route-href="route: games">Home</a>
      </div>
    </nav>
    <section class="">
      <form role="form" submit.delegate="submit()" class="game">
        <div class="field has-addons">
          <p class="control is-expanded">
            <span class="select is-fullwidth is-large">
              <select id="current_gametype" value.bind="current_gametype" change.delegate="selectGameType($event)">
                <option repeat.for="name of gametypes | keys">${name}</option>
              </select>
            </span>
          </p>
          <p class="control">
            <input id="current_score" class="input is-large is-narrow" type="number" min="0" value.bind="current_score" />
          </p>
          <p class="control">
            <button class="button is-large" id="submit" type="submit" disabled.bind="!canSubmit">Add</button>
          </p>
        </div>

      </form>
    </section>

    <table class="scores table">
      <thead>
        <tr>
          <td class="roundnr"></td>
          <td class="gametype"></td>
          <td class="player">
            <div class="input-button-group">
              <input class="form-control" type="checkbox" checked.bind="current_players[0]">
              <label class="button">${players[0]}</label>
            </div>
          </td>
          <td class="player">
            <div class="input-button-group">
              <input class="form-control" type="checkbox" checked.bind="current_players[1]">
              <label class="button">${players[1]}</label>
            </div>
          </td>
          <td class="player">
            <div class="input-button-group">
              <input class="form-control" type="checkbox" checked.bind="current_players[2]">
              <label class="button">${players[2]}</label>
            </div>
          </td>
          <td class="player">
            <div class="input-button-group">
              <input class="form-control" type="checkbox" checked.bind="current_players[3]">
              <label class="button">${players[3]}</label>
            </div>
          </td>
        </tr>
        <tr>
          <th class="roundnr">#</th>
          <th class="gametype"></th>
          <th class="player">${totals[0]}</th>
          <th class="player">${totals[1]}</th>
          <th class="player">${totals[3]}</th>
          <th class="player">${totals[2]}</th>
          <!--<th class="action"></th>-->
        </tr>
      </thead>
      <tbody>
        <tr repeat.for="round of sortedRounds" click.delegate="$parent.removeRound(round.id)">
          <td class="roundnr">${round.nr}</td>
          <td class="gametype">${round.gametype}</td>
          <td class="player">${round.s1}</td>
          <td class="player">${round.s2}</td>
          <td class="player">${round.s3}</td>
          <td class="player">${round.s4}</td>
          <!--<td class="action"><a href="#" click.delegate="$parent.removeRound(round.id)" title="Remove" class="delete"></a></td>-->
        </tr>
      </tbody>
    </table>
    <section class="section content">
      <h1>What's <a href="https://koenhandekyn.github.io/colourwhist/">this</a>?</h1>
      <p>This is a Coulour Whist Score Keeping application written in javascript using 
        <a href="http://aurelia.io/">Aurelia</a> as the main Javascript framework and
        <a href="gun.js.org">GunDB</a> for persistence and synchronisation of the data.
        It's currently written as a <a href="https://developers.google.com/web/progressive-web-apps/">Progressive Web App</a>.
        To create a new game, simply click <a class="" href="#" click.delegate="newGame()" title="New">New Game</a>
        and a new Game with a random name will be created.
        To allow others to join in the score keeping, just share the game URL with them.
      </p>      
      <a href="#" click.delegate="remove()" title="Remove" class="button">Destroy Game</a>
    </section>
  </section>
</template>